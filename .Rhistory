grafico5 <- empleados %>% ggplot(mapping = aes(fill=EMPLEADOS, values=numeros)) +
geom_waffle(n_rows=10, size=1.1, show.legend = F, colour = "white") +
theme_void() +
scale_fill_manual(values = colores) +
labs(title="Composición del empleo por sectores <span style = 'color: #29aee4;'>**privado**</span> y <span style='color: #0c8136;'>**público**</span> ", subtitle = "Primer trimestre 2021") +
theme(plot.title = element_markdown(size=14), text = element_text(family = "Open Sans"), plot.title.position = "plot" )
grafico5
ggsave("grafico5.svg")
knitr::opts_chunk$set(echo = FALSE, message = FALSE, warning = FALSE, dev = "cairo_pdf")
#Primero se cargan las librerías, fuentes y gama de colores que se utilizaran para el informe
#Librerias
library(ggtext)
library(eph)
library(tidyverse)
library(formattable)
library(Hmisc)
library(readxl)
library(foreign)
library(glue)
library(extrafont)
library(ggalt)
library(waffle)
library(Rcpp)
library(ggimage)
library(spatstat)
library(splitstackshape)
library(purrr)
library(treemapify)
library(scales)
library(forcats)
library(svglite)
library(ggchicklet)
library(ggpubr)
library(kableExtra)
#Fuente
font_import(paths = "./Open_Sans", prompt = F)
loadfonts(device = "win", quiet=T)
#Colores
colores<- c("#29aee4","#0c8136","#e22172","#f4a018","#428cb4","#c85687","#dbac2f","#5da14a","#ff9a00")
gradiente<- c("#ed3068","#ef4275","#f3789d","#f69cb7","#fbd2de")
#Se cargan las bases de datos
#Primer trimestre 2021
eph1ti<- get_microdata(year=2021, trimester=1, type="individual")
eph1tih <- get_microdata(year=2021, trimester=1, type="hogar")
eph1t <- left_join(eph1ti, eph1tih)
#Para mas adelante se necesitarán los datos del trimestre anterior, por lo que se procede a cargar la correspondiente base
#Cuartro trimestre 2020
ephi<- get_microdata(year=2020, trimester=4, type="individual")
ephh <- get_microdata(year=2020, trimester=4, type="hogar")
eph4t <- left_join(ephi, ephh)
#Se realiza un merge de ambas bases
ephtotal <- bind_rows(eph1t, eph4t)
ephtotalsd <- ephtotal %>% distinct(., CODUSU, NRO_HOGAR, COMPONENTE, .keep_all = T)
#CAES
caes<- read.csv("SECTORESCAES.csv", sep = ";", colClasses = "character")
#Modificaciones a la EPH
#Primer trimestre 2021
eph1t <- eph1t %>%  mutate(PEA= case_when(ESTADO==3 ~ 0,
ESTADO==4 ~ 0,
ESTADO==1 ~ 1,
ESTADO==2 ~ 1),
OCUPADOS= case_when(ESTADO==1 ~ 1,
ESTADO==2 ~ 0,
ESTADO==3 ~ 0,
ESTADO==4 ~ 0),
DESOCUPADOS= case_when(ESTADO==1 ~ 0,
ESTADO==2 ~ 1),
EMPLEADOS= case_when(PP04A==1 ~ "Empleados Publicos",
PP04A==2 ~ "Empleados privados",
PP04A==3 ~ "Otros",
TRUE ~ NA_character_),
PP04B_COD=as.character(PP04B_COD),
PP04B_COD=case_when(nchar(PP04B_COD)==4~PP04B_COD,
nchar(PP04B_COD)==1~ paste0("0",PP04B_COD,"00"),
nchar(PP04B_COD)==2~ paste0(PP04B_COD,"00"),
nchar(PP04B_COD)==3~ paste0("0",PP04B_COD)),
SECTOR= substr(PP04B_COD,1,2),
INFORMALES=case_when( CAT_OCUP==3 & PP07H==2 ~ 1,
CAT_OCUP==3 & PP07H==1 ~ 0),
PP04D_COD = as.character(PP04D_COD),
PP04D_COD = case_when(nchar(PP04D_COD) == 5 ~ PP04D_COD,
nchar(PP04D_COD) == 4 ~ paste0("0", PP04D_COD),
nchar(PP04D_COD) == 3 ~ paste0("00", PP04D_COD),
nchar(PP04D_COD) == 2 ~ paste0("000", PP04D_COD),
nchar(PP04D_COD) == 1 ~ paste0("0000", PP04D_COD)),
CALIFICACION = substr(PP04D_COD, 5, 5),
CALIFICACION = case_when(CALIFICACION=="1" ~ "Profesionales",
CALIFICACION=="2" ~ "Técnicos",
CALIFICACION=="3" ~ "Operativos",
CALIFICACION=="4" ~ "No Calificados"),
CALIFICACION = factor(CALIFICACION, c("No Calificados", "Operativos", "Técnicos", "Profesionales")),
TIPOCALIFICACION= case_when(CALIFICACION=="Profesionales" | CALIFICACION== "Técnicos" ~ "Calificado",
CALIFICACION=="No Calificados" | CALIFICACION=="Operativos" ~ "No calificado"),
SEXO= case_when(CH04==1 ~ "Hombres",
CH04==2 ~ "Mujeres"),
horastrabtotales= PP3E_TOT + PP3F_TOT)
#EPH fusionada
ephtotalsd <- ephtotalsd %>%  mutate(PEA= case_when(ESTADO==3 ~ 0,
ESTADO==4 ~ 0,
ESTADO==1 ~ 1,
ESTADO==2 ~ 1),
OCUPADOS= case_when(ESTADO==1 ~ 1,
ESTADO==2 ~ 0,
ESTADO==3 ~ 0,
ESTADO==4 ~ 0),
DESOCUPADOS= case_when(ESTADO==1 ~ 0,
ESTADO==2 ~ 1),
EMPLEADOS= case_when(PP04A==1 ~ "Empleados Publicos",
PP04A==2 ~ "Empleados privados",
PP04A==3 ~ "Otros",
TRUE ~ NA_character_),
PP04B_COD=as.character(PP04B_COD),
PP04B_COD=case_when(nchar(PP04B_COD)==4~PP04B_COD,
nchar(PP04B_COD)==1~ paste0("0",PP04B_COD,"00"),
nchar(PP04B_COD)==2~ paste0(PP04B_COD,"00"),
nchar(PP04B_COD)==3~ paste0("0",PP04B_COD)),
SECTOR= substr(PP04B_COD,1,2),
INFORMALES=case_when( CAT_OCUP==3 & PP07H==2 ~ 1,
CAT_OCUP==3 & PP07H==1 ~ 0),
PP04D_COD = as.character(PP04D_COD),
PP04D_COD = case_when(nchar(PP04D_COD) == 5 ~ PP04D_COD,
nchar(PP04D_COD) == 4 ~ paste0("0", PP04D_COD),
nchar(PP04D_COD) == 3 ~ paste0("00", PP04D_COD),
nchar(PP04D_COD) == 2 ~ paste0("000", PP04D_COD),
nchar(PP04D_COD) == 1 ~ paste0("0000", PP04D_COD)),
CALIFICACION = substr(PP04D_COD, 5, 5),
CALIFICACION = case_when(CALIFICACION=="1" ~ "Profesionales",
CALIFICACION=="2" ~ "Técnicos",
CALIFICACION=="3" ~ "Operativos",
CALIFICACION=="4" ~ "No Calificados"),
CALIFICACION = factor(CALIFICACION, c("No Calificados", "Operativos", "Técnicos", "Profesionales")),
TIPOCALIFICACION= case_when(CALIFICACION=="Profesionales" | CALIFICACION== "Técnicos" ~ "Calificado",
CALIFICACION=="No Calificados" | CALIFICACION=="Operativos" ~ "No calificado"))
sectores_eph1t<- left_join(eph1t,caes)
sectores_ephtotal<- left_join(ephtotalsd,caes)
Edad <- c("0-14", "15-24", "25-34", "35-44", "45-59", "Mayor o igual a 60")
Hombres <- c(0.28, 0.21, 0.16, 0.11, 0.15, 0.09)
Mujeres <- c(0.25, 0.20, 0.16, 0.12, 0.15, 0.12)
poblacion <- data.frame(Edad, Hombres, Mujeres)
#Tabla
tabla_1<- poblacion %>%
mutate(Hombres=formattable::percent(Hombres), Mujeres=formattable::percent(Mujeres)) %>%
kbl(caption="Población de la Ciudad de Corrientes", booktabs = T) %>%
kable_styling(latex_options = c("striped", "hover", "condensed"), font_size = 9, position = "center") %>%
row_spec(0, color = "white", bold = TRUE, background="#29aee4", font_size = 12) %>%
row_spec(seq(1,nrow(poblacion),2), background="#F0FFFF") %>%
column_spec(1, width = "18em") %>%
column_spec(2, width = "14em") %>%
column_spec(3, width = "14em") %>%
save_kable("./graficos_md/tabla_1.pdf")
#Tabla
tabla_1<- poblacion %>%
mutate(Hombres=formattable::percent(Hombres), Mujeres=formattable::percent(Mujeres)) %>%
kbl(caption="Población de la Ciudad de Corrientes", booktabs = T) %>%
kable_styling(latex_options = c("striped", "hover", "condensed"), font_size = 9, position = "center") %>%
row_spec(0, color = "white", bold = TRUE, background="#29aee4", font_size = 12) %>%
row_spec(seq(1,nrow(poblacion),2), background="#F0FFFF") %>%
column_spec(1, width = "18em") %>%
column_spec(2, width = "14em") %>%
column_spec(3, width = "14em") %>%
save_kable("./graficos_md/tabla_1.pdf")
#Tabla
tabla_1<- poblacion %>%
mutate(Hombres=formattable::percent(Hombres), Mujeres=formattable::percent(Mujeres)) %>%
kbl(caption="Población de la Ciudad de Corrientes", booktabs = T) %>%
kable_styling(latex_options = c("striped", "hover", "condensed"), font_size = 9, position = "center") %>%
row_spec(0, color = "white", bold = TRUE, background="#29aee4", font_size = 12) %>%
row_spec(seq(1,nrow(poblacion),2), background="#F0FFFF") %>%
column_spec(1, width = "18em") %>%
column_spec(2, width = "14em") %>%
column_spec(3, width = "14em") %>%
save_kable("./graficos_md/tabla_1.pdf")
#Tabla
tabla_1<- poblacion %>%
mutate(Hombres=formattable::percent(Hombres), Mujeres=formattable::percent(Mujeres)) %>%
kbl(caption="Población de la Ciudad de Corrientes", booktabs = T) %>%
kable_styling(latex_options = c("striped", "hover", "condensed"), font_size = 9, position = "center") %>%
row_spec(0, color = "white", bold = TRUE, background="#29aee4", font_size = 12) %>%
row_spec(seq(1,nrow(poblacion),2), background="#F0FFFF") %>%
column_spec(1, width = "18em") %>%
column_spec(2, width = "14em") %>%
column_spec(3, width = "14em")
kableExtra::save_kable(tabla_1,"./graficos_md/tabla_1.pdf")
#Tabla
tabla_1<- poblacion %>%
mutate(Hombres=formattable::percent(Hombres), Mujeres=formattable::percent(Mujeres)) %>%
kbl(caption="Población de la Ciudad de Corrientes", booktabs = T) %>%
kable_styling(latex_options = c("striped", "hover", "condensed"), font_size = 9, position = "center") %>%
row_spec(0, color = "white", bold = TRUE, background="#29aee4", font_size = 12) %>%
row_spec(seq(1,nrow(poblacion),2), background="#F0FFFF") %>%
column_spec(1, width = "18em") %>%
column_spec(2, width = "14em") %>%
column_spec(3, width = "14em")
kableExtra::save_kable(tabla_1,"./graficos_md/tabla_1.svg")
#svg(filename = 'tabla_1.pdf')
#Tabla
tabla_1<- poblacion %>%
mutate(Hombres=formattable::percent(Hombres), Mujeres=formattable::percent(Mujeres)) %>%
kbl(caption="Población de la Ciudad de Corrientes", booktabs = T) %>%
kable_styling(latex_options = c("striped", "hover", "condensed"), font_size = 9, position = "center") %>%
row_spec(0, color = "white", bold = TRUE, background="#29aee4", font_size = 12) %>%
row_spec(seq(1,nrow(poblacion),2), background="#F0FFFF") %>%
column_spec(1, width = "18em") %>%
column_spec(2, width = "14em") %>%
column_spec(3, width = "14em")
kableExtra::save_kable(tabla_1,"./graficos_md/tabla_1.jpg")
#svg(filename = 'tabla_1.pdf')
#Tabla
tabla_1<- poblacion %>%
mutate(Hombres=formattable::percent(Hombres), Mujeres=formattable::percent(Mujeres)) %>%
kbl(caption="Población de la Ciudad de Corrientes", booktabs = T) %>%
kable_styling(latex_options = c("striped", "hover", "condensed"), font_size = 9, position = "center") %>%
row_spec(0, color = "white", bold = TRUE, background="#29aee4", font_size = 12) %>%
row_spec(seq(1,nrow(poblacion),2), background="#F0FFFF") %>%
column_spec(1, width = "18em") %>%
column_spec(2, width = "14em") %>%
column_spec(3, width = "14em")
kableExtra::save_kable(tabla_1,"./graficos_md/tabla_1.pdf")
#Tabla
tabla_1<- poblacion %>%
mutate(Hombres=formattable::percent(Hombres), Mujeres=formattable::percent(Mujeres)) %>%
kbl(caption="Población de la Ciudad de Corrientes", booktabs = T) %>%
kable_styling(latex_options = c("striped", "hover", "condensed"), font_size = 9, position = "center") %>%
row_spec(0, color = "white", bold = TRUE, background="#29aee4", font_size = 12) %>%
row_spec(seq(1,nrow(poblacion),2), background="#F0FFFF") %>%
column_spec(1, width = "18em") %>%
column_spec(2, width = "14em") %>%
column_spec(3, width = "14em")
kableExtra::save_kable(tabla_1,"./graficos_md/tabla_1.tex")
#svg(filename = 'tabla_1.pdf')
#Tabla
tabla_1<- poblacion %>%
mutate(Hombres=formattable::percent(Hombres), Mujeres=formattable::percent(Mujeres)) %>%
kbl(caption="Población de la Ciudad de Corrientes", booktabs = T) %>%
kable_styling(latex_options = c("striped", "hover", "condensed"), font_size = 9, position = "center") %>%
row_spec(0, color = "white", bold = TRUE, background="#29aee4", font_size = 12) %>%
row_spec(seq(1,nrow(poblacion),2), background="#F0FFFF") %>%
column_spec(1, width = "18em") %>%
column_spec(2, width = "14em") %>%
column_spec(3, width = "14em")
kableExtra::save_kable(tabla_1,"./graficos_md/tabla_1.pdf")
#Tabla
tabla_1<- poblacion %>%
mutate(Hombres=formattable::percent(Hombres), Mujeres=formattable::percent(Mujeres)) %>%
kbl(caption="Población de la Ciudad de Corrientes", booktabs = T) %>%
kable_styling(latex_options = c("striped", "hover", "condensed"), font_size = 9, position = "center") %>%
row_spec(0, color = "white", bold = TRUE, background="#29aee4", font_size = 12) %>%
row_spec(seq(1,nrow(poblacion),2), background="#F0FFFF") %>%
column_spec(1, width = "18em") %>%
column_spec(2, width = "14em") %>%
column_spec(3, width = "14em")
kableExtra::save_kable(tabla_1,"./graficos_md/tabla_1.pdf",keep_tex = TRUE)
#Tabla
tabla_1<- poblacion %>%
mutate(Hombres=formattable::percent(Hombres), Mujeres=formattable::percent(Mujeres)) %>%
kbl(caption="Población de la Ciudad de Corrientes", booktabs = T) %>%
kable_styling(latex_options = c("striped", "hover", "condensed"), font_size = 9, position = "center") %>%
row_spec(0, color = "white", bold = TRUE, background="#29aee4", font_size = 12) %>%
row_spec(seq(1,nrow(poblacion),2), background="#F0FFFF") %>%
column_spec(1, width = "18em") %>%
column_spec(2, width = "14em") %>%
column_spec(3, width = "14em")
kableExtra::save_kable(tabla_1,"./graficos_md/tabla_1.jpg",keep_tex = TRUE)
#svg(filename = 'tabla_1.pdf')
#Tabla
tabla_1<- poblacion %>%
mutate(Hombres=formattable::percent(Hombres), Mujeres=formattable::percent(Mujeres)) %>%
kbl(caption="Población de la Ciudad de Corrientes", booktabs = T) %>%
kable_styling(latex_options = c("striped", "hover", "condensed"), font_size = 14, position = "center") %>%
row_spec(0, color = "white", bold = TRUE, background="#29aee4", font_size = 16) %>%
row_spec(seq(1,nrow(poblacion),2), background="#F0FFFF") %>%
column_spec(1, width = "18em") %>%
column_spec(2, width = "14em") %>%
column_spec(3, width = "14em")
#kableExtra::save_kable(tabla_1,"./graficos_md/tabla_1.jpg",keep_tex = TRUE)
#svg(filename = 'tabla_1.pdf')
#Tabla
tabla_1<- poblacion %>%
mutate(Hombres=formattable::percent(Hombres), Mujeres=formattable::percent(Mujeres)) %>%
kbl(caption="Población de la Ciudad de Corrientes", booktabs = T) %>%
kable_styling(latex_options = c("striped", "hover", "condensed"), font_size = 14, position = "center") %>%
row_spec(0, color = "white", bold = TRUE, background="#29aee4", font_size = 16) %>%
row_spec(seq(1,nrow(poblacion),2), background="#F0FFFF") %>%
column_spec(1, width = "18em") %>%
column_spec(2, width = "14em") %>%
column_spec(3, width = "14em")
kableExtra::save_kable(tabla_1,"./graficos_md/tabla_1.jpg",keep_tex = TRUE)
#svg(filename = 'tabla_1.pdf')
#Tabla
tabla_1<- poblacion %>%
mutate(Hombres=formattable::percent(Hombres), Mujeres=formattable::percent(Mujeres)) %>%
kbl(caption="Población de la Ciudad de Corrientes", booktabs = T) %>%
kable_styling(latex_options = c("striped", "hover", "condensed"), font_size = 14, position = "center") %>%
row_spec(0, color = "white", bold = TRUE, background="#29aee4", font_size = 16) %>%
row_spec(seq(1,nrow(poblacion),2), background="#F0FFFF") %>%
column_spec(1, width = "18em") %>%
column_spec(2, width = "14em") %>%
column_spec(3, width = "14em")
kableExtra::save_kable(tabla_1,"./graficos_md/tabla_1.pdf",keep_tex = TRUE)
#Tabla
tabla_1<- poblacion %>%
mutate(Hombres=formattable::percent(Hombres), Mujeres=formattable::percent(Mujeres)) %>%
kbl(caption="Población de la Ciudad de Corrientes", booktabs = T) %>%
kable_styling(latex_options = c("striped", "hover", "condensed"), font_size = 18, position = "center") %>%
row_spec(0, color = "white", bold = TRUE, background="#29aee4", font_size = 22) %>%
row_spec(seq(1,nrow(poblacion),2), background="#F0FFFF") %>%
column_spec(1, width = "18em") %>%
column_spec(2, width = "14em") %>%
column_spec(3, width = "14em")
kableExtra::save_kable(tabla_1,"./graficos_md/tabla_1.pdf",keep_tex = TRUE)
#Tabla
tabla_1<- poblacion %>%
mutate(Hombres=formattable::percent(Hombres), Mujeres=formattable::percent(Mujeres)) %>%
kbl(booktabs = T) %>%
kable_styling(latex_options = c("striped", "hover", "condensed"), font_size = 18, position = "center") %>%
row_spec(0, color = "white", bold = TRUE, background="#29aee4", font_size = 22) %>%
row_spec(seq(1,nrow(poblacion),2), background="#F0FFFF") %>%
column_spec(1, width = "18em") %>%
column_spec(2, width = "14em") %>%
column_spec(3, width = "14em")
kableExtra::save_kable(tabla_1,"./graficos_md/tabla_1.pdf",keep_tex = TRUE)
#Tabla
tabla_1<- poblacion %>%
mutate(Hombres=formattable::percent(Hombres), Mujeres=formattable::percent(Mujeres)) %>%
kbl(booktabs = T) %>%
kable_styling(latex_options = c("striped", "hover", "condensed"), font_size = 18, position = "center") %>%
row_spec(0, color = "white", bold = TRUE, background="#29aee4", font_size = 22) %>%
row_spec(seq(1,nrow(poblacion),2), background="#F0FFFF") %>%
column_spec(1, width = "18em") %>%
column_spec(2, width = "14em") %>%
column_spec(3, width = "14em")
kableExtra::save_kable(tabla_1,"./graficos_md/tabla_1.jpg",keep_tex = TRUE)
#svg(filename = 'tabla_1.pdf')
#Tabla
tabla_1<- poblacion %>%
mutate(Hombres=formattable::percent(Hombres), Mujeres=formattable::percent(Mujeres)) %>%
kbl(booktabs = T) %>%
kable_styling(latex_options = c("striped", "hover", "condensed"), font_size = 18, position = "center") %>%
row_spec(0, color = "white", bold = TRUE, background="#29aee4", font_size = 22) %>%
row_spec(seq(1,nrow(poblacion),2), background="#F0FFFF") %>%
column_spec(1, width = "18em") %>%
column_spec(2, width = "14em") %>%
column_spec(3, width = "14em")
kableExtra::save_kable(tabla_1,"./graficos_md/tabla_1.jpg")
#svg(filename = 'tabla_1.pdf')
knitr::opts_chunk$set(echo = FALSE, message = FALSE, warning = FALSE, dev = "cairo_pdf")
#Primero se cargan las librerías, fuentes y gama de colores que se utilizaran para el informe
#Librerias
library(ggtext)
library(eph)
library(tidyverse)
library(formattable)
library(Hmisc)
library(readxl)
library(foreign)
library(glue)
library(extrafont)
library(ggalt)
library(waffle)
library(Rcpp)
library(ggimage)
library(spatstat)
library(splitstackshape)
library(purrr)
library(treemapify)
library(scales)
library(forcats)
library(svglite)
library(ggchicklet)
library(ggpubr)
library(kableExtra)
#Fuente
font_import(paths = "./Open_Sans", prompt = F)
loadfonts(device = "win", quiet=T)
#Colores
colores<- c("#29aee4","#0c8136","#e22172","#f4a018","#428cb4","#c85687","#dbac2f","#5da14a","#ff9a00")
gradiente<- c("#ed3068","#ef4275","#f3789d","#f69cb7","#fbd2de")
#Se cargan las bases de datos
#Primer trimestre 2021
eph1ti<- get_microdata(year=2021, trimester=1, type="individual")
eph1tih <- get_microdata(year=2021, trimester=1, type="hogar")
eph1t <- left_join(eph1ti, eph1tih)
#Para mas adelante se necesitarán los datos del trimestre anterior, por lo que se procede a cargar la correspondiente base
#Cuartro trimestre 2020
ephi<- get_microdata(year=2020, trimester=4, type="individual")
ephh <- get_microdata(year=2020, trimester=4, type="hogar")
eph4t <- left_join(ephi, ephh)
#Se realiza un merge de ambas bases
ephtotal <- bind_rows(eph1t, eph4t)
ephtotalsd <- ephtotal %>% distinct(., CODUSU, NRO_HOGAR, COMPONENTE, .keep_all = T)
#CAES
caes<- read.csv("SECTORESCAES.csv", sep = ";", colClasses = "character")
#Modificaciones a la EPH
#Primer trimestre 2021
eph1t <- eph1t %>%  mutate(PEA= case_when(ESTADO==3 ~ 0,
ESTADO==4 ~ 0,
ESTADO==1 ~ 1,
ESTADO==2 ~ 1),
OCUPADOS= case_when(ESTADO==1 ~ 1,
ESTADO==2 ~ 0,
ESTADO==3 ~ 0,
ESTADO==4 ~ 0),
DESOCUPADOS= case_when(ESTADO==1 ~ 0,
ESTADO==2 ~ 1),
EMPLEADOS= case_when(PP04A==1 ~ "Empleados Publicos",
PP04A==2 ~ "Empleados privados",
PP04A==3 ~ "Otros",
TRUE ~ NA_character_),
PP04B_COD=as.character(PP04B_COD),
PP04B_COD=case_when(nchar(PP04B_COD)==4~PP04B_COD,
nchar(PP04B_COD)==1~ paste0("0",PP04B_COD,"00"),
nchar(PP04B_COD)==2~ paste0(PP04B_COD,"00"),
nchar(PP04B_COD)==3~ paste0("0",PP04B_COD)),
SECTOR= substr(PP04B_COD,1,2),
INFORMALES=case_when( CAT_OCUP==3 & PP07H==2 ~ 1,
CAT_OCUP==3 & PP07H==1 ~ 0),
PP04D_COD = as.character(PP04D_COD),
PP04D_COD = case_when(nchar(PP04D_COD) == 5 ~ PP04D_COD,
nchar(PP04D_COD) == 4 ~ paste0("0", PP04D_COD),
nchar(PP04D_COD) == 3 ~ paste0("00", PP04D_COD),
nchar(PP04D_COD) == 2 ~ paste0("000", PP04D_COD),
nchar(PP04D_COD) == 1 ~ paste0("0000", PP04D_COD)),
CALIFICACION = substr(PP04D_COD, 5, 5),
CALIFICACION = case_when(CALIFICACION=="1" ~ "Profesionales",
CALIFICACION=="2" ~ "Técnicos",
CALIFICACION=="3" ~ "Operativos",
CALIFICACION=="4" ~ "No Calificados"),
CALIFICACION = factor(CALIFICACION, c("No Calificados", "Operativos", "Técnicos", "Profesionales")),
TIPOCALIFICACION= case_when(CALIFICACION=="Profesionales" | CALIFICACION== "Técnicos" ~ "Calificado",
CALIFICACION=="No Calificados" | CALIFICACION=="Operativos" ~ "No calificado"),
SEXO= case_when(CH04==1 ~ "Hombres",
CH04==2 ~ "Mujeres"),
horastrabtotales= PP3E_TOT + PP3F_TOT)
#EPH fusionada
ephtotalsd <- ephtotalsd %>%  mutate(PEA= case_when(ESTADO==3 ~ 0,
ESTADO==4 ~ 0,
ESTADO==1 ~ 1,
ESTADO==2 ~ 1),
OCUPADOS= case_when(ESTADO==1 ~ 1,
ESTADO==2 ~ 0,
ESTADO==3 ~ 0,
ESTADO==4 ~ 0),
DESOCUPADOS= case_when(ESTADO==1 ~ 0,
ESTADO==2 ~ 1),
EMPLEADOS= case_when(PP04A==1 ~ "Empleados Publicos",
PP04A==2 ~ "Empleados privados",
PP04A==3 ~ "Otros",
TRUE ~ NA_character_),
PP04B_COD=as.character(PP04B_COD),
PP04B_COD=case_when(nchar(PP04B_COD)==4~PP04B_COD,
nchar(PP04B_COD)==1~ paste0("0",PP04B_COD,"00"),
nchar(PP04B_COD)==2~ paste0(PP04B_COD,"00"),
nchar(PP04B_COD)==3~ paste0("0",PP04B_COD)),
SECTOR= substr(PP04B_COD,1,2),
INFORMALES=case_when( CAT_OCUP==3 & PP07H==2 ~ 1,
CAT_OCUP==3 & PP07H==1 ~ 0),
PP04D_COD = as.character(PP04D_COD),
PP04D_COD = case_when(nchar(PP04D_COD) == 5 ~ PP04D_COD,
nchar(PP04D_COD) == 4 ~ paste0("0", PP04D_COD),
nchar(PP04D_COD) == 3 ~ paste0("00", PP04D_COD),
nchar(PP04D_COD) == 2 ~ paste0("000", PP04D_COD),
nchar(PP04D_COD) == 1 ~ paste0("0000", PP04D_COD)),
CALIFICACION = substr(PP04D_COD, 5, 5),
CALIFICACION = case_when(CALIFICACION=="1" ~ "Profesionales",
CALIFICACION=="2" ~ "Técnicos",
CALIFICACION=="3" ~ "Operativos",
CALIFICACION=="4" ~ "No Calificados"),
CALIFICACION = factor(CALIFICACION, c("No Calificados", "Operativos", "Técnicos", "Profesionales")),
TIPOCALIFICACION= case_when(CALIFICACION=="Profesionales" | CALIFICACION== "Técnicos" ~ "Calificado",
CALIFICACION=="No Calificados" | CALIFICACION=="Operativos" ~ "No calificado"))
sectores_eph1t<- left_join(eph1t,caes)
sectores_ephtotal<- left_join(ephtotalsd,caes)
Edad <- c("0-14", "15-24", "25-34", "35-44", "45-59", "Mayor o igual a 60")
Hombres <- c(0.28, 0.21, 0.16, 0.11, 0.15, 0.09)
Mujeres <- c(0.25, 0.20, 0.16, 0.12, 0.15, 0.12)
poblacion <- data.frame(Edad, Hombres, Mujeres)
#Tabla
tabla_1<- poblacion %>%
mutate(Hombres=formattable::percent(Hombres), Mujeres=formattable::percent(Mujeres)) %>%
kbl(booktabs = T) %>%
kable_styling(latex_options = c("striped", "hover", "condensed"), font_size = 18, position = "center") %>%
row_spec(0, color = "white", bold = TRUE, background="#29aee4", font_size = 22) %>%
row_spec(seq(1,nrow(poblacion),2), background="#F0FFFF") %>%
column_spec(1, width = "18em") %>%
column_spec(2, width = "14em") %>%
column_spec(3, width = "14em")
kableExtra::save_kable(tabla_1,"./graficos_md/tabla_1.jpg")
#svg(filename = 'tabla_1.pdf')
#Tabla
tabla_1<- poblacion %>%
mutate(Hombres=formattable::percent(Hombres), Mujeres=formattable::percent(Mujeres)) %>%
kbl(booktabs = T) %>%
kable_styling(latex_options = c("striped", "hover", "condensed"), font_size = 18, position = "center") %>%
row_spec(0, color = "white", bold = TRUE, background="#29aee4", font_size = 22) %>%
row_spec(seq(1,nrow(poblacion),2), background="#F0FFFF") %>%
column_spec(1, width = "18em") %>%
column_spec(2, width = "14em") %>%
column_spec(3, width = "14em")
kableExtra::save_kable(tabla_1,"./graficos_md/tabla_1.jpg")
#svg(filename = 'tabla_1.pdf')
#Tabla
tabla_1<- poblacion %>%
mutate(Hombres=formattable::percent(Hombres), Mujeres=formattable::percent(Mujeres)) %>%
kbl(booktabs = T) %>%
kable_styling(latex_options = c("striped", "hover", "condensed"), font_size = 18, position = "center") %>%
row_spec(0, color = "white", bold = TRUE, background="#29aee4", font_size = 22) %>%
row_spec(seq(1,nrow(poblacion),2), background="#F0FFFF") %>%
column_spec(1, width = "18em") %>%
column_spec(2, width = "14em") %>%
column_spec(3, width = "14em")
kableExtra::save_kable(tabla_1,"./graficos_md/tabla_1.jpg")
#svg(filename = 'tabla_1.pdf')
