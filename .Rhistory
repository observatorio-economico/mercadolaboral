mujeres <- superiorcompleto %>%  filter(CH04==2)
mujeres <- mujeres %>%  group_by(PEA) %>% summarise(sum(PONDERA)/sum(mujeres$PONDERA))
mujeres
####Tasa de participacion laboral por sexo y  quintil de ingreso####
install.packages("Hmisc")
library(Hmisc)
ephcorr <- ephtotalsd %>% filter(AGLOMERADO==12 & ESTADO!=0)
deflactor <- read.csv("deflactor.csv", header=T, sep=";", dec=".")
deflactor <- read.csv("C:/Users/Bianca/Documents/GitHub/mercadolaboral/deflactor.csv", header=T, sep=";", dec=".")
ephcorr <- left_join(ephcorr, deflactor)
ephcorr <- ephcorr %>%  mutate(IPCFR = IPCF/DEFLACTOR)
ephcorr <- ephcorr %>%  mutate(cuantilp=as.numeric(cut(IPCFR, wtd.quantile(IPCFR, weights = PONDIH, probs = seq(0,1,length=6), na.rm = T), include.lowest = F)))
table(ephcorr$cuantilp)
#Quintil 1
quintil1 <- ephcorr %>% filter(cuantilp==1)
#Hombres
hombres <- quintil1 %>%  filter (CH04==1)
hombres <- hombres %>% group_by(PEA) %>% summarise(sum(PONDIH)/sum(hombres$PONDIH))
hombres
#Mujeres
mujeres <- quintil1 %>%  filter (CH04==2)
mujeres <- mujeres %>% group_by(PEA) %>% summarise(sum(PONDIH)/sum(mujeres$PONDIH))
mujeres
#Quintil 2
quintil2 <- ephcorr %>% filter(cuantilp==2)
#Hombres
hombres <- quintil2 %>%  filter (CH04==1)
hombres <- hombres %>% group_by(PEA) %>% summarise(sum(PONDIH)/sum(hombres$PONDIH))
hombres
#Mujeres
mujeres <- quintil2 %>%  filter (CH04==2)
mujeres <- mujeres %>% group_by(PEA) %>% summarise(sum(PONDIH)/sum(mujeres$PONDIH))
mujeres
table(ephcorr$cuantilp)
dim(ephcorr)
#Quintil 3
quintil3 <- ephcorr %>% filter(cuantilp==3)
#Hombres
hombres <- quintil3 %>%  filter (CH04==1)
hombres <- hombres %>% group_by(PEA) %>% summarise(sum(PONDIH)/sum(hombres$PONDIH))
hombres
#Mujeres
mujeres <- quintil3 %>%  filter (CH04==2)
mujeres <- mujeres %>% group_by(PEA) %>% summarise(sum(PONDIH)/sum(mujeres$PONDIH))
mujeres
#Quintil 4
quintil4 <- ephcorr %>% filter(cuantilp==4)
#Hombres
hombres <- quintil4 %>%  filter (CH04==1)
hombres <- hombres %>% group_by(PEA) %>% summarise(sum(PONDIH)/sum(hombres$PONDIH))
hombres
#Mujeres
mujeres <- quintil4 %>%  filter (CH04==2)
mujeres <- mujeres %>% group_by(PEA) %>% summarise(sum(PONDIH)/sum(mujeres$PONDIH))
mujeres
#Quintil 5
quintil5 <- ephcorr %>% filter(cuantilp==5)
#Hombres
hombres <- quintil5 %>%  filter (CH04==1)
hombres <- hombres %>% group_by(PEA) %>% summarise(sum(PONDIH)/sum(hombres$PONDIH))
hombres
#Mujeres
mujeres <- quintil5 %>%  filter (CH04==2)
mujeres <- mujeres %>% group_by(PEA) %>% summarise(sum(PONDIH)/sum(mujeres$PONDIH))
mujeres
####Cantidad de horas trabajadas####
horastrabtotales <- ephtotalsd %>% mutate(horastrabtotales= PP3E_TOT + PP3F_TOT)
#15-24 a√±os
horastrab <- horastrabtotales %>% filter (AGLOMERADO==12 & ESTADO!=0 & CH06<=24 & CH06>=15 & !is.na(horastrabtotales))
horastrab <- horastrab %>%  group_by(CH04) %>% summarise(horastrabtotales%*%PONDERA/sum(PONDERA))
horastrab
#25-34
horastrab <- horastrabtotales %>% filter (AGLOMERADO==12 & ESTADO!=0 & CH06<=34 & CH06>=25 & !is.na(horastrabtotales))
horastrab <- horastrab %>%  group_by(CH04) %>% summarise(horastrabtotales%*%PONDERA/sum(PONDERA))
horastrab
#35 a 44
horastrab <- horastrabtotales %>% filter (AGLOMERADO==12 & ESTADO!=0 & CH06<=44 & CH06>=35 & !is.na(horastrabtotales))
horastrab <- horastrab %>%  group_by(CH04) %>% summarise(horastrabtotales%*%PONDERA/sum(PONDERA))
horastrab
#45 a 59
horastrab <- horastrabtotales %>% filter (AGLOMERADO==12 & ESTADO!=0 & CH06<=59 & CH06>=45 & !is.na(horastrabtotales))
horastrab <- horastrab %>%  group_by(CH04) %>% summarise(horastrabtotales%*%PONDERA/sum(PONDERA))
horastrab
#mayores de 60
horastrab <- horastrabtotales %>% filter (AGLOMERADO==12 & ESTADO!=0 & CH06>=60 & !is.na(horastrabtotales))
horastrab <- horastrab %>%  group_by(CH04) %>% summarise(horastrabtotales%*%PONDERA/sum(PONDERA))
horastrab
#Total mujeres y hombres
horastrab <- horastrabtotales %>% filter (AGLOMERADO==12 & ESTADO!=0 & !is.na(horastrabtotales))
horastrab <- horastrab %>%  group_by(CH04) %>% summarise(horastrabtotales%*%PONDERA/sum(PONDERA))
horastrab
#Total de la poblacion
horastrab <- horastrabtotales %>% filter (AGLOMERADO==12 & ESTADO!=0 & !is.na(horastrabtotales))
horastrab <- horastrab %>% summarise(horastrabtotales%*%PONDERA/sum(PONDERA))
horastrab
####Tasa de empleo####
empleo <- ephtotalsd %>% filter(AGLOMERADO==12 & !is.na(OCUPADOS))
empleo <- empleo %>%  group_by(OCUPADOS) %>%  summarise(sum(PONDERA)/sum(empleo$PONDERA))
empleo
####Tasa de desocupacion####
desocupacion <- ephtotalsd %>% filter(AGLOMERADO==12 & !is.na(DESOCUPADOS))
desocupacion <- desocupacion %>%  group_by(DESOCUPADOS) %>%  summarise(sum(PONDERA)/sum(desocupacion$PONDERA))
desocupacion
ephtotalsd <- ephtotalsd %>%  mutate(PEA= case_when(ESTADO==3 ~ 0,
ESTADO==4 ~ 0,
ESTADO==1 ~ 1,
ESTADO==2 ~ 1),
OCUPADOS= case_when(ESTADO==1 ~ 1,
ESTADO==2 ~ 0,
ESTADO==3 ~ 0,
ESTADO==4 ~ 0),
DESOCUPADOS= case_when(ESTADO==1 ~ 0,
ESTADO==2 ~ 1),
EMPLEADOSPUB= case_when(ESTADO==1 ~ 0,
PP04A==1 ~ 1))
####Composicion del empleo####
#Empleados publicos
empleadospublicos <- ephtotalsd %>% filter(AGLOMERADO==12 & !is.na(EMPLEADOSPUB))
empleadospublicos <- empleadospublicos %>%  group_by(empleadospublicos) %>%  summarise(sum(PONDERA)/sum(empleadospublicos$PONDERA))
empleadospublicos <- empleadospublicos %>%  group_by(EMPLEADOSPUB) %>%  summarise(sum(PONDERA)/sum(empleadospublicos$PONDERA))
empleadospublicos
ephtotalsd <- ephtotalsd %>%  mutate(PEA= case_when(ESTADO==3 ~ 0,
ESTADO==4 ~ 0,
ESTADO==1 ~ 1,
ESTADO==2 ~ 1),
OCUPADOS= case_when(ESTADO==1 ~ 1,
ESTADO==2 ~ 0,
ESTADO==3 ~ 0,
ESTADO==4 ~ 0),
DESOCUPADOS= case_when(ESTADO==1 ~ 0,
ESTADO==2 ~ 1),
EMPLEADOS= case_when(PP04A==1 ~ "Empleados Publicos",
PP04A==2 ~ "Empleados privados"))
empleadospublicos <- empleadospublicos %>%  group_by(EMPLEADOS) %>%  count()
####Composicion del empleo####
#Empleados publicos
empleadospublicos <- ephtotalsd %>% filter(AGLOMERADO==12 & !is.na(EMPLEADOSPUB))
empleadospublicos <- empleadospublicos %>%  group_by(EMPLEADOS) %>%  count()
empleadospublicos
####Composicion del empleo####
#Empleados publicos
empleados <- ephtotalsd %>% filter(AGLOMERADO==12 & !is.na(EMPLEADOS))
empleados <- empleadospublicos %>%  group_by(EMPLEADOS) %>%  count()
empleados
####Composicion del empleo####
#Empleados publicos
empleados <- ephtotalsd %>% filter(AGLOMERADO==12 & !is.na(EMPLEADOS))
empleados <- empleadospublicos %>%  group_by(EMPLEADOS) %>%  count()
empleados
View(ephtotalsd)
####Composicion del empleo####
#Empleados publicos
empleados <- ephtotalsd %>% filter(AGLOMERADO==12 & !is.na(EMPLEADOS))
empleados <- empleados %>%  group_by(EMPLEADOS) %>%  count()
empleados
ephtotalsd <- ephtotalsd %>%  mutate(PEA= case_when(ESTADO==3 ~ 0,
ESTADO==4 ~ 0,
ESTADO==1 ~ 1,
ESTADO==2 ~ 1),
OCUPADOS= case_when(ESTADO==1 ~ 1,
ESTADO==2 ~ 0,
ESTADO==3 ~ 0,
ESTADO==4 ~ 0),
DESOCUPADOS= case_when(ESTADO==1 ~ 0,
ESTADO==2 ~ 1),
EMPLEADOS= case_when(PP04A==1 ~ "Empleados Publicos",
PP04A==2 ~ "Empleados privados",
PP04A==3 ~ "Otros"))
####Composicion del empleo####
#Empleados publicos
empleados <- ephtotalsd %>% filter(AGLOMERADO==12 & !is.na(EMPLEADOS))
empleados <- empleados %>%  group_by(EMPLEADOS) %>%  count()
empleados
empleados <- empleados %>% mutate(proporcion=n/sum(n))
empleados
empleados <- empleados %>% mutate(proporcion=n/sum(empleados$n))
empleados
####Composicion del empleo####
#Empleados publicos
empleados <- ephtotalsd %>% filter(AGLOMERADO==12))
####Composicion del empleo####
#Empleados publicos
empleados <- ephtotalsd %>% filter(AGLOMERADO==12)
empleados <- empleados %>%  group_by(EMPLEADOS) %>%  count()
empleados
empleados <- empleados %>% mutate(proporcion=n/sum(empleados$n))
empleados
####Composicion del empleo####
#Empleados publicos
empleados <- ephtotalsd %>% filter(AGLOMERADO==12 & !is.na(EMPLEADOS))
empleados <- empleados %>%  group_by(EMPLEADOS) %>%  count()
empleados
empleados <- empleados %>% mutate(proporcion=n/sum(empleados$n))
empleados
####Composicion del empleo####
#Empleados publicos
empleados <- ephtotalsd %>% filter(AGLOMERADO==12 & !is.na(EMPLEADOS))
empleados <- empleados %>%  group_by(EMPLEADOS) %>%  count()
empleados
empleados <- empleados %>% mutate(proporcion=n/sum(empleados$PONDERA))
empleados
####Composicion del empleo####
#Empleados publicos
empleados <- ephtotalsd %>% filter(AGLOMERADO==12 & !is.na(EMPLEADOS))
empleados <- empleados %>%  group_by(EMPLEADOS) %>%  count()
empleados
empleados <- empleados %>% mutate(proporcion=n/sum(empleados$n))
empleados
####Composicion del empleo####
#Empleados publicos
empleados <- ephtotalsd %>% filter(AGLOMERADO==12 & !is.na(EMPLEADOS))
empleados <- empleados %>%  group_by(EMPLEADOS) %>%  count()
empleados
empleados <- empleados %>% mutate(proporcion=PONDERA/sum(empleados$PONDERA))
empleados
####Composicion del empleo####
#Empleados publicos
empleados <- ephtotalsd %>% filter(AGLOMERADO==12 & !is.na(EMPLEADOS))
empleados <- empleados %>%  group_by(EMPLEADOS) %>%  count()
empleados
empleados <- empleados %>% mutate(proporcion=PONDERA/sum(empleados$PONDERA))
####Composicion del empleo####
#Empleados publicos
empleados <- ephtotalsd %>% filter(AGLOMERADO==12 & !is.na(EMPLEADOS))
empleados <- empleados %>%  group_by(EMPLEADOS) %>%  count()
empleados
empleados <- empleados %>% mutate(PONDERA/sum(empleados$PONDERA))
empleados
####Composicion del empleo####
#Empleados publicos
empleados <- ephtotalsd %>% filter(AGLOMERADO==12 & !is.na(EMPLEADOS))
empleados <- empleados %>%  group_by(EMPLEADOS) %>%  count()
empleados
empleados <- empleados %>% mutate(proporcion=n/sum(empleados$n))
empleados
empleados <- ephtotalsd %>% filter(AGLOMERADO==12 & !is.na(EMPLEADOS))
empleados <- empleados %>%  group_by(EMPLEADOS) %>%  summarise(sum(PONDERA))
empleados
empleados <- empleados %>% mutate(proporcion=`sum(PONDERA)`/sum(empleados)$`sum(PONDERA)`)
empleados <- empleados %>% mutate(proporcion=`sum(PONDERA)`/sum(empleados$`sum(PONDERA)`))
empleados
####Composicion del empleo####
#Empleados
empleados <- ephtotalsd %>% filter(AGLOMERADO==12 & !is.na(EMPLEADOS) & OCUPADOS==1)
empleados <- empleados %>%  group_by(EMPLEADOS) %>%  summarise(sum(PONDERA))
empleados
empleados <- empleados %>% mutate(proporcion=`sum(PONDERA)`/sum(empleados$`sum(PONDERA)`))
empleados
####Composicion del empleo####
#Empleados
empleados <- ephtotalsd %>% filter(AGLOMERADO==12 & !is.na(EMPLEADOS) & OCUPADOS!=1)
empleados <- empleados %>%  group_by(EMPLEADOS) %>%  summarise(sum(PONDERA))
empleados
empleados <- empleados %>% mutate(proporcion=`sum(PONDERA)`/sum(empleados$`sum(PONDERA)`))
empleados
####Composicion del empleo####
#Empleados
empleados <- ephtotalsd %>% filter(AGLOMERADO==12 & !is.na(EMPLEADOS) & OCUPADOS==1)
empleados <- empleados %>%  group_by(EMPLEADOS) %>%  summarise(sum(PONDERA))
empleados
empleados <- empleados %>% mutate(proporcion=`sum(PONDERA)`/sum(empleados$`sum(PONDERA)`))
empleados
ephtotalsd <- ephtotalsd %>%  mutate(PEA= case_when(ESTADO==3 ~ 0,
ESTADO==4 ~ 0,
ESTADO==1 ~ 1,
ESTADO==2 ~ 1),
OCUPADOS= case_when(ESTADO==1 ~ 1,
ESTADO==2 ~ 0,
ESTADO==3 ~ 0,
ESTADO==4 ~ 0),
DESOCUPADOS= case_when(ESTADO==1 ~ 0,
ESTADO==2 ~ 1),
EMPLEADOS= case_when(PP04A==1 ~ "Empleados Publicos",
PP04A==2 ~ "Empleados privados",
PP04A==3 ~ "Otros",
TRUE ~ NA))
ephtotalsd <- ephtotalsd %>%  mutate(PEA= case_when(ESTADO==3 ~ 0,
ESTADO==4 ~ 0,
ESTADO==1 ~ 1,
ESTADO==2 ~ 1),
OCUPADOS= case_when(ESTADO==1 ~ 1,
ESTADO==2 ~ 0,
ESTADO==3 ~ 0,
ESTADO==4 ~ 0),
DESOCUPADOS= case_when(ESTADO==1 ~ 0,
ESTADO==2 ~ 1),
EMPLEADOS= case_when(PP04A==1 ~ "Empleados Publicos",
PP04A==2 ~ "Empleados privados",
PP04A==3 ~ "Otros",
TRUE ~ NA))
ephtotalsd <- ephtotalsd %>%  mutate(PEA= case_when(ESTADO==3 ~ 0,
ESTADO==4 ~ 0,
ESTADO==1 ~ 1,
ESTADO==2 ~ 1),
OCUPADOS= case_when(ESTADO==1 ~ 1,
ESTADO==2 ~ 0,
ESTADO==3 ~ 0,
ESTADO==4 ~ 0),
DESOCUPADOS= case_when(ESTADO==1 ~ 0,
ESTADO==2 ~ 1),
EMPLEADOS= case_when(PP04A==1 ~ "Empleados Publicos",
PP04A==2 ~ "Empleados privados",
PP04A==3 ~ "Otros",
TRUE ~ NA_character_))
####Composicion del empleo####
#Empleados
empleados <- ephtotalsd %>% filter(AGLOMERADO==12 & !is.na(EMPLEADOS) & OCUPADOS==1)
empleados <- empleados %>%  group_by(EMPLEADOS) %>%  summarise(sum(PONDERA))
empleados
empleados <- empleados %>% mutate(proporcion=`sum(PONDERA)`/sum(empleados$`sum(PONDERA)`))
empleados
empleados <- ephtotalsd %>% filter(AGLOMERADO==12 & !is.na(EMPLEADOS) & OCUPADOS==1)
table(empleados$EMPLEADOS)
####Composicion del empleo####
#Empleados
empleados <- ephtotalsd %>% filter(AGLOMERADO==12 & !is.na(EMPLEADOS) & OCUPADOS==1)
table(empleados$EMPLEADOS)
empleados <- empleados %>%  group_by(EMPLEADOS) %>%  summarise(sum(PONDERA))
empleados
empleados <- empleados %>% mutate(proporcion=`sum(PONDERA)`/sum(empleados$`sum(PONDERA)`))
empleados
####Composicion del empleo por sexo####
composicionempleados <- ephtotalsd %>% filter(AGLOMERADO==12 & !is.na(EMPLEADOS) & OCUPADOS==1)
composicionempleados <- composicionempleados %>%  group_by(CH04) %>%  summarise(sum(PONDERA))
empleados
empleados <- empleados %>% mutate(proporcion=`sum(PONDERA)`/sum(empleados$`sum(PONDERA)`))
empleados
composicionempleados <- ephtotalsd %>% filter(AGLOMERADO==12 & !is.na(EMPLEADOS) & OCUPADOS==1)
composicionempleados <- empleados %>%  group_by(CH04) %>%  summarise(sum(PONDERA))
composicionempleados <- ephtotalsd %>% filter(AGLOMERADO==12 & !is.na(EMPLEADOS) & OCUPADOS==1)
composicionempleados <- composicionempleados %>%  group_by(CH04) %>%  summarise(sum(PONDERA))
composicionempleados
composicionempleados <- empleados %>% mutate(proporcion=`sum(PONDERA)`/sum(composicionempleados$`sum(PONDERA)`))
composicionempleados
composicionempleados <- ephtotalsd %>% filter(AGLOMERADO==12 & !is.na(EMPLEADOS) & OCUPADOS==1)
composicionempleados <- composicionempleados %>%  group_by(CH04) %>%  summarise(sum(PONDERA))
composicionempleados
composicionempleados <- composicionempleados %>% mutate(proporcion=`sum(PONDERA)`/sum(composicionempleados$`sum(PONDERA)`))
composicionempleados
composicionempleados <- ephtotalsd %>% filter(AGLOMERADO==12 & !is.na(EMPLEADOS) & OCUPADOS==1 & EMPLEADOS=="Empleados publicos")
composicionempleados <- composicionempleados %>%  group_by(CH04) %>%  summarise(sum(PONDERA))
composicionempleados
composicionempleados <- composicionempleados %>% mutate(proporcion=`sum(PONDERA)`/sum(composicionempleados$`sum(PONDERA)`))
composicionempleados
composicionempleados <- ephtotalsd %>% filter(AGLOMERADO==12 & !is.na(EMPLEADOS) & OCUPADOS==1 & PP04A==1)
composicionempleados <- composicionempleados %>%  group_by(CH04) %>%  summarise(sum(PONDERA))
composicionempleados
composicionempleados <- composicionempleados %>% mutate(proporcion=`sum(PONDERA)`/sum(composicionempleados$`sum(PONDERA)`))
composicionempleados
empleados <- ephtotalsd %>% filter(AGLOMERADO==12 & !is.na(EMPLEADOS) & OCUPADOS==1)
table(empleados$EMPLEADOS)
table (composicionempleados$CH04)
composicionempleados <- ephtotalsd %>% filter(AGLOMERADO==12 & !is.na(EMPLEADOS) & PP04A==1)
composicionempleados <- composicionempleados %>%  group_by(CH04) %>%  summarise(sum(PONDERA))
composicionempleados
composicionempleados <- composicionempleados %>% mutate(proporcion=`sum(PONDERA)`/sum(composicionempleados$`sum(PONDERA)`))
composicionempleados
cargalaboral <- horastrabtotales %>% filter (AGLOMERADO==12 & ESTADO!=0 & !is.na(horastrabtotales) & PP04A==1)
cargalaboral <- cargalaboral %>% summarise(horastrabtotales%*%PONDERA/sum(PONDERA))
cargalaboral
cargalaboralpub <- horastrabtotales %>% filter (AGLOMERADO==12 & ESTADO!=0 & !is.na(horastrabtotales) & PP04A==1)
cargalaboralpub <- cargalaboralpub %>% summarise(horastrabtotales%*%PONDERA/sum(PONDERA))
cargalaboralpub
#Sector privado
cargalaboralpriv <- horastrabtotales %>% filter (AGLOMERADO==12 & ESTADO!=0 & !is.na(horastrabtotales) & PP04A==2)
cargalaboralpriv <- cargalaboralpriv %>% summarise(horastrabtotales%*%PONDERA/sum(PONDERA))
cargalaboralpriv
table(ephtotalsd$EMPLEADOS)
composicionempleados <- ephtotalsd %>% filter(AGLOMERADO==12 & !is.na(EMPLEADOS) & PP04A==1)
table(composicionempleados$EMPLEADOS)
#Composicion del empleo
####Empleados publicos y privados####
empleados <- ephtotalsd %>% filter(AGLOMERADO==12 & !is.na(EMPLEADOS) & OCUPADOS==1)
table(empleados$EMPLEADOS)
####Promedio de edad por sector####
promedioedad <- ephtotalsd %>% filter (AGLOMERADO==12 & !is.na(EMPLEADOS) & PP04A==1)
promedioedad <- promedioedad %>%  group_by(EMPLEADOS) & summarise(sum(PONDERA)/sum(promedioedad$PONDERA))
####Promedio de edad por sector####
promedioedad <- ephtotalsd %>% filter (AGLOMERADO==12 & ESTADO!=0 & PP04A==1)
promedioedad <- promedioedad %>% summarise(horastrabtotales%*%PONDERA/sum(PONDERA))
promedioedad
library(tidyverse)
file.choose()
file.choose()
ephi <- read.table("C:\\Users\\Bianca\\Desktop\\MUNI\\DATOS\\CARPETA MIA\\EPH\\2020\\2do trimestre\\usu_Individual_T220.txt", header=T, sep = ";", dec= ",")
ephh <- read.table("C:\\Users\\Bianca\\Desktop\\MUNI\\DATOS\\CARPETA MIA\\EPH\\2020\\2do trimestre\\usu_hogar_T220.txt", header=T, sep = ";", dec= ",")
View(ephh)
View(ephh)
View(ephh)
eph2t <- left_join(ephi, ephh)
View(eph2t)
file.choose()
ephi<- read.table("C:\\Users\\Bianca\\Desktop\\MUNI\\DATOS\\CARPETA MIA\\EPH\\2020\\1er trimestre\\usu_individual_T120.txt", header=T, sep = ";", dec= ",")
ephh<- read.table("C:\\Users\\Bianca\\Desktop\\MUNI\\DATOS\\CARPETA MIA\\EPH\\2020\\1er trimestre\\usu_hogar_T120.txt", header=T, sep = ";", dec= ",")
eph1t <- left_join(ephi, ephh)
eph1s<- bind_rows(eph2t, eph1t)
View(eph1s)
eph1ssd <- eph1s %>% distinct(., CODUSU, NRO_HOGAR, COMPONENTE, .keep_all = T)
table(eph1s$TRIMESTRE)
table(eph1ssd$TRIMESTRE)
library(eph)
library(tidyverse)
ephi<- get_microdata(year=2020, trimester = 2, type = "individual")
library(eph)
library(tidyverse)
library(tidyverse)
ephi<- get_microdata(year=2020, trimester = 2, type = "individual")
View(ephi)
ephh<- get_microdata(year=2020, trimester = 2, type = "hogar")
eph2t<- left_join(ephi, ephh)
ephi<- get_microdata(year=2020, trimester = 1, type = "individual")
ephh<- get_microdata(year=2020, trimester = 1, type = "hogar")
eph1t<- left_join(ephi, ephh)
eph1s <- bind_rows(eph2t, eph1t)
eph1ssd <- eph1s %>% distinct(., CODUSU, NRO_HOGAR, COMPONENTE, .keep_all = T)
rm(list=ls())
##Mercado laboral hasta el segundo trimestre 2020
setwd("~/GitHub/mercadolaboral")
wd()
library(eph)
library(tidyverse)
#Segundo trimestre 2020
ephi<- get_microdata(year=2020, trimester = 2, type = "individual")
ephh<- get_microdata(year=2020, trimester = 2, type = "hogar")
eph2t<- left_join(ephi, ephh)
#Primer trimestre 2020
ephi<- get_microdata(year=2020, trimester = 1, type = "individual")
ephh<- get_microdata(year=2020, trimester = 1, type = "hogar")
eph1t<- left_join(ephi, ephh)
#Cuarto 2019
ephi<- get_microdata(year=2019, trimester = 4, type = "individual")
ephh<- get_microdata(year=2019, trimester = 4, type = "hogar")
eph4t2019<- left_join(ephi, ephh)
#Tercero 2019
ephi<- get_microdata(year=2019, trimester = 3, type = "individual")
ephh<- get_microdata(year=2019, trimester = 3, type = "hogar")
eph3t2019<- left_join(ephi, ephh)
ephtotal <- bind_rows(eph2t, eph1t, eph4t2019, eph3t2019)
#Quitar duplicados:
ephtotalsd <- ephtotal %>% distinct(., CODUSU, NRO_HOGAR, COMPONENTE, .keep_all = T)
tablapeapt <- ephtotalsd %>% filter (AGLOMERADO==12 & ESTADO!=0)
table(tablapeapt$PEA)
ephtotalsd <- ephtotalsd %>%  mutate(PEA= case_when(ESTADO==3 ~ 0,
ESTADO==4 ~ 0,
ESTADO==1 ~ 1,
ESTADO==2 ~ 1),
OCUPADOS= case_when(ESTADO==1 ~ 1,
ESTADO==2 ~ 0,
ESTADO==3 ~ 0,
ESTADO==4 ~ 0),
DESOCUPADOS= case_when(ESTADO==1 ~ 0,
ESTADO==2 ~ 1),
EMPLEADOS= case_when(PP04A==1 ~ "Empleados Publicos",
PP04A==2 ~ "Empleados privados",
PP04A==3 ~ "Otros",
TRUE ~ NA_character_))
tablapeapt <- ephtotalsd %>% filter (AGLOMERADO==12 & ESTADO!=0)
table(tablapeapt$PEA)
tablapeapt <- tablapeapt %>% group_by(PEA) %>%  summarise((sum(PONDERA)/sum(tablapeapt$PONDERA)), sum(PONDERA))
tablapeapt
######Tasa de participacion laboral de la poblacion total #####
#Primero se filtra la base
tablapeapt <- ephtotalsd %>% filter (AGLOMERADO==12 & ESTADO!=0)
tablapeapt <- tablapeapt %>% group_by(PEA) %>%  summarise((sum(PONDERA)/sum(tablapeapt$PONDERA)), sum(PONDERA), sum(tablapeapt$PONDERA))
tablapeapt <- tablapeapt %>% group_by(PEA) %>%  summarise((sum(PONDERA)/sum(tablapeapt$PONDERA)), sum(PONDERA), sum(tablapeapt$PONDERA))
######Tasa de participacion laboral de la poblacion total #####
#Primero se filtra la base
tablapeapt <- ephtotalsd %>% filter (AGLOMERADO==12 & ESTADO!=0)
#Ahora armamos la tabla (cantidad de 1 sobre cantidad de 0 y 1) y se agrupa entre 0 y 1 (PEA==1), ademas se agrega la cantidad de habitantes dentro de la PEA.
tablapeapt <- tablapeapt %>% group_by(PEA) %>%  summarise((sum(PONDERA)/sum(tablapeapt$PONDERA)), sum(PONDERA), sum(tablapeapt$PONDERA))
tablapeapt
######Tasa de participacion laboral de la poblacion total #####
#Primero se filtra la base
tablapeapt <- ephtotalsd %>% filter (AGLOMERADO==12 & ESTADO!=0)
#Ahora armamos la tabla (cantidad de 1 sobre cantidad de 0 y 1) y se agrupa entre 0 y 1 (PEA==1), ademas se agrega la cantidad de habitantes dentro de la PEA.
tablapeapt <- tablapeapt %>% group_by(PEA) %>%  summarise((sum(PONDERA)/sum(tablapeapt$PONDERA)), sum(PONDERA)/4, sum(tablapeapt$PONDERA)/4)
tablapeapt
eph2t %>% summarise(sum(PONDERA))
eph2t %>% summarise(sum(PONDERA))
eph1t %>% summarise(sum(PONDERA))
eph3t2019 %>% summarise(sum(PONDERA))
ephtotalsd %>% summarise(sum(PONDERA))
tablapeapt <- ephtotalsd %>% filter (AGLOMERADO==12 & ESTADO!=0)
#Ahora armamos la tabla (cantidad de 1 sobre cantidad de 0 y 1) y se agrupa entre 0 y 1 (PEA==1), ademas se agrega la cantidad de habitantes dentro de la PEA.
tablapeapt <- tablapeapt %>% group_by(PEA) %>%  summarise((sum(PONDERA)/sum(tablapeapt$PONDERA)), sum(PONDERA), sum(tablapeapt$PONDERA))
tablapeapt
######Tasa de participacion laboral por sexo######
#Primero, se filtra la base:
tablapeasexo<- ephtotalsd %>% filter (AGLOMERADO==12 & ESTADO!=0 & PEA==1)
tablapeasexo <- tablapeasexo %>% group_by(PEA, CH04) %>%  summarise(sum(PONDERA), sum(PONDERA)/sum(tablapeasexo$PONDERA %*% tablapeasexo$PEA))
tablapeasexo
######Tasa de participacion laboral por sexo######
#Primero, se filtra la base:
tablapeasexo<- ephtotalsd %>% filter (AGLOMERADO==12 & ESTADO!=0 & PEA==1)
######Tasa de participacion laboral por sexo######
#Primero, se filtra la base:
tablapeasexo<- ephtotalsd %>% filter (AGLOMERADO==12 & ESTADO!=0 & PEA==1)
tablapeasexo <- tablapeasexo %>% group_by(CH04) %>%  summarise(sum(PONDERA), sum(PONDERA)/sum(tablapeasexo$PONDERA %*% tablapeasexo$PEA))
tablapeasexo
######Tasa de participacion laboral por sexo######
#Primero, se filtra la base:
tablapeasexo<- ephtotalsd %>% filter (AGLOMERADO==12 & ESTADO!=0 & PEA==1)
tablapeasexo <- tablapeasexo %>% group_by(CH04) %>%  summarise(sum(PONDERA), sum(PONDERA)/sum(tablapeasexo$PONDERA))
tablapeasexo
#Proporcion de mujeres que conforman la PEA sobre el total de mujeres:
tablapeamujeres <- ephtotalsd %>%  filter(AGLOMERADO==12 & ESTADO!=0 & CH04==2)
tablapeamujeres <- tablapeamujeres %>% group_by(PEA) %>%  summarise(sum(PONDERA)/sum(tablapeamujeres$PONDERA))
tablapeamujeres
#Proporcion de hombres que conforman la PEA sobre el total de hombres:
tablapeahombres <- ephtotalsd %>%  filter(AGLOMERADO==12 & ESTADO!=0 & CH04==1)
tablapeahombres <- tablapeahombres %>% group_by(PEA) %>% summarise(sum(PONDERA)/sum(tablapeahombres$PONDERA))
tablapeahombres
