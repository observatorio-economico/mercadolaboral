#que se mueva entre 0.5 y 1, hace que aumente el promedio de la x, promedio 0.75.
u2.500 <- rnorm(150)
y2.500 <- 10 + 3*x2.500 + u2.500
gr2.500 <- c(rep(0, 150))
x.500<- c(x1.500, x2.500)
y.500<- c(y1.500, y2.500)
d.500<- c(gr1.500, gr2.500)
mbe.500 <- lm(y.500 ~ x.500 + d.500)
mme.500 <- lm(y.500 ~ x.500)
beta.500[i] <- summary(mbe.500)$coefficients[2]
beta.500.sub[i] <- summary(mme.500)$coefficients[2]
}
plot(density(beta.100))
x11()
plot(density(beta.100))
plot(density(beta.100), col=3, lwd=2)
lines(density(beta.200), col=4, lwd=2)
lines(density(beta.500), col=5, lwd=2)
plot(density(beta.100), yli,=c(0,1.5), col=3, lwd=2)
x11()
plot(density(beta.100), ylim=c(0,1.5), col=3, lwd=2)
lines(density(beta.200), col=4, lwd=2)
lines(density(beta.500), col=5, lwd=2)
x11()
plot(density(beta.100.sub), ylim=c(0,1.5), col=3, lwd=2)
lines(density(beta.200.sub), col=4, lwd=2)
lines(density(beta.500.sub), col=5, lwd=2)
abline(v=3)
abline(v=3, lwd=2)
x11()
plot(density(beta.100.sub), ylim=c(0,1.5), col=3, lwd=2)
lines(density(beta.200.sub), col=4, lwd=2)
lines(density(beta.500.sub), col=5, lwd=2)
abline(v=3, lwd=2)
plot(density(beta.100.sub), ylim=c(0,1.5), xlim(2.8, 7) col=3, lwd=2)
plot(density(beta.100.sub), ylim=c(0,1.5), xlim(2.8, 7), col=3, lwd=2)
plot(density(beta.100.sub), ylim=c(0,1.5), xlim=c(2.8, 7), col=3, lwd=2)
lines(density(beta.200.sub), col=4, lwd=2)
lines(density(beta.500.sub), col=5, lwd=2)
abline(v=3, lwd=2)
set.seed(345)
# Primer Grupo
x1<-runif(50)
u1<-rnorm(50)
y1<-5+2*x1+u1
gr1<-c(rep(1, 50))
# Segundo Grupo
x2<-runif(60)
u2<-rnorm(60)
y2<-5+4*x2+u2
gr2<-c(rep(0, 60))  # esta sería el grupo de referencia
# Agrupamos en una sola muestra
x<-c(x1,x2)
y<-c(y1,y2)
d<-c(gr1,gr2)
mme<-lm(y~x)
summary(mme)
mme<-lm(y~x+d)
summary(mme)
set.seed(345)
# Primer Grupo
x1<-runif(50)
u1<-rnorm(50)
y1<-5+2*x1+u1
gr1<-c(rep(1, 50))
# Segundo Grupo
x2<-runif(60)
u2<-rnorm(60)
y2<-5+4*x2+u2
gr2<-c(rep(0, 60))
x<-c(x1,x2)
y<-c(y1,y2)
d<-c(gr1,gr2)
x11()
plot(x,y)
abline(v=0)
points(x1,y1, col=2)
points(x2,y2, col=4)
abline(a=5, b=2, col="red")
abline(a=5, b=4, col="blue")
set.seed(345)
x1 <- runif(50)
u1 <- rnorm(50)
y1 <- 5 + 2* x1 + u1
gr1 <- c(rep(0,50))
#Segundo grupo
x2 <- runif(60)
u2 <- rnorm(60)
y2 <- 5 + 4* x2 + u2
gr2 <- c(rep(0,60))
x<-c(x1,x2)
y<-c(y1,y2)
d<-c(gr1,gr2)
x11()
plot(x,y)
abline(v=0)
points(x1,y1, col=2)
points(x2,y2, col=4)
abline(a=5, b=2, col="red")
abline(a=5, b=4, col="blue")
mme <- lm(y~x)
summary(mme)
x11()
plot(x,y)
points(x1,y1, col=2)
points(x2,y2, col=4)
abline(a=5, b=2, col="red")
abline(a=5, b=4, col="blue")
abline(a=mme$coeff[1], b=mme$coeff[2], lty=2)
inter<-d*x #creo la interaccion
mbe<-lm(y~x+inter) #pruebo agregando la dummy
summary(mbe)
inter<-d*x
mbe<-lm(y~x+inter) #pruebo agregando la dummy
summary(mbe)
set.seed(345)
#primer grupo
set.seed(345)
x1 <- runif(50)
u1 <- rnorm(50)
y1 <- 5 + 2* x1 + u1
gr1 <- c(rep(0,50))
#Segundo grupo
x2 <- runif(60)
u2 <- rnorm(60)
y2 <- 5 + 4* x2 + u2
gr2 <- c(rep(0,60))
x<-c(x1,x2)
y<-c(y1,y2)
d<-c(gr1,gr2)
inter<-d*x
mbe<-lm(y~x+inter)
summary(mbe)
inter<-d*x
mbe<-lm(y~x+inter)
summary(mbe)
set.seed(345)
# Primer Grupo
x1<-runif(50)
u1<-rnorm(50)
y1<-5+2*x1+u1
gr1<-c(rep(1, 50))
# Segundo Grupo
x2<-runif(60)
u2<-rnorm(60)
y2<-5+4*x2+u2
gr2<-c(rep(0, 60))  # esta sería el grupo de referencia
# Agrupamos en una sola muestra
x<-c(x1,x2)
y<-c(y1,y2)
d<-c(gr1,gr2)
inter<-d*x
mbe<-lm(y~x+inter)
summary(mbe)
set.seed(345)
#primer grupo
set.seed(345)
x1 <- runif(50)
u1 <- rnorm(50)
y1 <- 5 + 2* x1 + u1
gr1 <- c(rep(1,50))
#Segundo grupo
x2 <- runif(60)
u2 <- rnorm(60)
y2 <- 5 + 4* x2 + u2
gr2 <- c(rep(0,60))
x<-c(x1,x2)
y<-c(y1,y2)
d<-c(gr1,gr2)
inter<-d*x #creo la interaccion
mbe<-lm(y~x+inter+d) #pruebo agregando la dummy
summary(mbe)
inter<-d*x #creo la interaccion
mbe<-lm(y~x+inter) #pruebo agregando la dummy
summary(mbe)
x11()
plot(x,y)
points(x1,y1, col=2)
points(x2,y2, col=4)
abline(a=5, b=2, col="red")
abline(a=5, b=4, col="blue")
abline(a=mbe$coeff[1], b=mbe$coeff[2]+mbe$coeff[3], col="red", lty=2)
abline(a=mbe$coeff[1], b=mbe$coeff[2], col="blue", lty=2)
set.seed(345)
x1 <- runif(50)
u1 <- rnorm(50)
y1 <- 5 + 2* x1 + u1
gr1 <- c(rep(1,50))
#Segundo grupo
x2 <- runif(60, 0.5, 1)
u2 <- rnorm(60)
y2 <- 5 + 4* x2 + u2
gr2 <- c(rep(0,60))
x<-c(x1,x2)
y<-c(y1,y2)
d<-c(gr1,gr2)
mme<- lm(y~x)
summary(mme)
x11()
plot(x,y)
points(x1,y1, col=3)
points(x2, y2, col=4)
abline(a=mme$coefficients[1], b=mme$coefficients[2], lty=2)
abline(a=5, b=2, col=3)
abline(a=5, b=4, col=4)
int <- d*x
mbe <- lm(y~ x + int)
summary(mbe)
x11()
plot(x,y)
plot(x,y)
points(x1,y1, col=3)
points(x2, y2, col=4)
abline(a=5, b=2, col=3)
abline(a=5, b=4, col=4)
abline(a=mbe$coefficients[1], b=mbe$coefficients[2], col=3)
x11()
plot(x,y)
points(x1,y1, col=3)
points(x2, y2, col=4)
abline(a=5, b=4, col=3)
abline(a=5, b=2, col=4)
abline(a=mbe$coefficients[1], b=mbe$coefficients[2], col=3, lty=2)
abline(a=mbe$coefficients[1], b=mbe$coefficients[2]+mbe$coefficients[3], lty=2)
abline(a=mbe$coefficients[1], b=mbe$coefficients[2]+mbe$coefficients[3], col=4, lty=2)
abline(a=mme$coefficients[1], b=mme$coefficients[2], lty=2)
x1 <- runif(50)
u1<- rnorm(50)
y1<- 10 + 2*x1 + u1
gr1<- c(rep(0,50))
x2 <- runif(50)
u2<- rnorm(50)
y2 <- 7+ 4*x2 + u2
gr2 <- c(rep(1,50))
x <- c(x1, x2)
y <- c(y1, y2)
d <- c(gr1, gr2)
set.seed(345)
x1 <- runif(50)
u1<- rnorm(50)
y1<- 10 + 2*x1 + u1
gr1<- c(rep(0,50))
x2 <- runif(50)
u2<- rnorm(50)
y2 <- 7+ 4*x2 + u2
gr2 <- c(rep(1,50))
x <- c(x1, x2)
y <- c(y1, y2)
d <- c(gr1, gr2)
mme <- lm(y ~ x)
summary(mme)
x11()
plot(x,y)
points(x1,y1, col=3, lwd=2)
points(x2,y2, col=4, lwd=2)
abline(a=10, b=2, col=3)
abline(a=7, b=4, col=4)
abline(a=mme$coefficients[1], b=mme$coefficients[2], lty=2)
int<- d*x
mbe <- lm(y ~ x + d +int)
summary(mbe)
x11()
plot(x,y)
points(x1,y1, col=3, lwd=2)
points(x2,y2, col=4, lwd=2)
abline(a=10, b=2, col=3)
abline(a=7, b=4, col=4)
abline(a=mbe$coefficients[1], b=mbe$coefficients[2], col=3)
abline(a=mbe$coefficients[1], b=mbe$coefficients[2], col=3, lty=2)
x11()
plot(x,y)
points(x1,y1, col=3, lwd=2)
points(x2,y2, col=4, lwd=2)
abline(a=10, b=2, col=3)
abline(a=7, b=4, col=4)
abline(a=mbe$coefficients[1], b=mbe$coefficients[2], col=3, lty=2)
abline(a=mbe$coefficients[1]+mbe$coefficients[3], b=mbe$coefficients[2]+ mbe$coefficients[4], col=4, lty=2)
abline(a=mme$coefficients[1], b=mme$coefficients[2], lty=2)
set.seed(33)
x1 <- runif(50)
u1<- rnorm(50)
y1<- 10 + 2*x1 + u1
gr1<- c(rep(0,50))
x2 <- runif(50)
u2<- rnorm(50)
y2 <- 7+ 4*x2 + u2
gr2 <- c(rep(1,50))
x <- c(x1, x2)
y <- c(y1, y2)
d <- c(gr1, gr2)
mme <- lm(y ~ x)
summary(mme)
x11()
plot(x,y)
points(x1,y1, col=3, lwd=2)
points(x2,y2, col=4, lwd=2)
abline(a=10, b=2, col=3)
abline(a=7, b=4, col=4)
abline(a=mme$coefficients[1], b=mme$coefficients[2], lty=2)
int<- d*x
mbe <- lm(y ~ x + d +int)
summary(mbe)
x11()
plot(x,y)
points(x1,y1, col=3, lwd=2)
points(x2,y2, col=4, lwd=2)
abline(a=10, b=2, col=3)
abline(a=7, b=4, col=4)
abline(a=mbe$coefficients[1], b=mbe$coefficients[2], col=3, lty=2)
abline(a=mbe$coefficients[1]+mbe$coefficients[3], b=mbe$coefficients[2]+ mbe$coefficients[4], col=4, lty=2)
abline(a=mme$coefficients[1], b=mme$coefficients[2], lty=2)
library(sf)
library(ggplot2)
ctes <- st_read("municipios_2010_geo.shp")
file.choose()
ctes <- st_read("C:\\Users\\Bianca\\Desktop\\municipios_2010_geo.shp")
library(sf)
library(ggplot2)
ctes <- st_read("C:\\Users\\Bianca\\Desktop\\municipios_2010_geo.shp")
install.packages("installr", dependencies = TRUE)
library(installr)
updateR()
updateR()
updateR()
updateR()
library(installr)
library(installr)
updateR()
install.packages(tidyverse)
install.packages(tidyverse)
install.packages("tidyverse")
library(tidyverse)
file.choose()
ephi <- read.table("C:\\Users\\Bianca\\Desktop\\MUNI\\DATOS\\CARPETA MIA\\EPH\\2020\\2do trimestre\\usu_Individual_T220.txt", header=T, sep = ";", dec= ",")
View(ephi)
ephi <- read.table("C:\\Users\\Bianca\\Desktop\\MUNI\\DATOS\\CARPETA MIA\\EPH\\2020\\2do trimestre\\usu_hogar_T220.txt", header=T, sep = ";", dec= ",")
ephi <- read.table("C:\\Users\\Bianca\\Desktop\\MUNI\\DATOS\\CARPETA MIA\\EPH\\2020\\2do trimestre\\usu_Individual_T220.txt", header=T, sep = ";", dec= ",")
ephh <- read.table("C:\\Users\\Bianca\\Desktop\\MUNI\\DATOS\\CARPETA MIA\\EPH\\2020\\2do trimestre\\usu_hogar_T220.txt", header=T, sep = ";", dec= ",")
View(ephh)
ephtotal <- left_join(ephi, ephh)
ephtotal <- left_join((ephi, ephh, by="CODUSU, NRO_HOGAR, AGLOMERADO))
ephtotal <- left_join((ephi, ephh, by=c(CODUSU, NRO_HOGAR, AGLOMERADO)))
ephtotal <- left_join(ephi, ephh, by=c("CODUSU", "NRO_HOGAR", "AGLOMERADO"))
View(ephtotal)
ephtotal <- left_join(ephi, ephh)
ephtotal2 <- left_join(ephi, ephh, by=c("CODUSU", "NRO_HOGAR", "AGLOMERADO"))
ephtotal <- left_join(ephi, ephh)
eph2t <- left_join(ephi, ephh)
file.choose()
ephi<- read.table("C:\\Users\\Bianca\\Desktop\\MUNI\\DATOS\\CARPETA MIA\\EPH\\2020\\1er trimestre\\usu_individual_T120.txt", header=T, sep = ";", dec= ",")
ephh<- read.table("C:\\Users\\Bianca\\Desktop\\MUNI\\DATOS\\CARPETA MIA\\EPH\\2020\\1er trimestre\\usu_hogar_T120.txt", header=T, sep = ";", dec= ",")
eph1t <- left_join(ephi, ephh)
eph1s<- bind_rows(eph2t, eph1t)
View(eph1s)
eph1ssd <- eph1s %>% distinct(., CODUSU, NRO_HOGAR, COMPONENTE, .keep_all = T)
View(eph1ssd)
table(eph1s$TRIMESTRE)
table(eph1ssd$TRIMESTRE)
install.packages("eph")
library(eph)
ephi<- get_microdata(year=2020, trimester = 2, type = "individual")
ephi<- get_microdata(year=2020, trimester = 2, type = "hogar")
ephi<- get_microdata(year=2020, trimester = 2, type = "individual")
ephh<- get_microdata(year=2020, trimester = 2, type = "hogar")
left_join(ephi, ephh)
eph2t<- left_join(ephi, ephh)
ephi<- get_microdata(year=2020, trimester = 1, type = "individual")
ephh<- get_microdata(year=2020, trimester = 1, type = "hogar")
eph1t<- left_join(ephi, ephh)
eph1s <- bind_rows(eph2t, eph1t)
View(eph1s)
library(Hmisc)
####Tasa de participacion laboral por sexo y  quintil de ingreso####
install.packages(Hmisc)
install.packages(Hmisc)
install.packages(Hmisc)
installed.packages(Hmisc)
install.packages(Hmisc)
install.packages("Hmisc")
install.packages("Hmisc")
library(Hmisc)
#Generamos la PEA
ephtotalsd <- ephtotalsd %>%  mutate(PEA= case_when(ESTADO==3 ~ 0,
ESTADO==4 ~ 0,
ESTADO==1 ~ 1,
ESTADO==2 ~ 1)
horastrabtot=PP3E_TOT + PP3F_TOT)
#Generamos la PEA
ephtotalsd <- ephtotalsd %>%  mutate(PEA= case_when(ESTADO==3 ~ 0,
ESTADO==4 ~ 0,
ESTADO==1 ~ 1,
ESTADO==2 ~ 1),
horastrabtot=PP3E_TOT + PP3F_TOT)
#Generamos la PEA
ephtotalsd <- ephtotalsd %>%  mutate(PEA= case_when(ESTADO==3 ~ 0,
ESTADO==4 ~ 0,
ESTADO==1 ~ 1,
ESTADO==2 ~ 1),
horastrabtot=PP3E_TOT + PP3F_TOT)
#Generamos la PEA
ephtotalsd <- ephtotalsd %>%  mutate(PEA= case_when(ESTADO==3 ~ 0,
ESTADO==4 ~ 0,
ESTADO==1 ~ 1,
ESTADO==2 ~ 1))
library(eph)
library(tidyverse)
#Segundo trimestre 2020
ephi<- get_microdata(year=2020, trimester = 2, type = "individual")
ephh<- get_microdata(year=2020, trimester = 2, type = "hogar")
eph2t<- left_join(ephi, ephh)
#Primer trimestre 2020
ephi<- get_microdata(year=2020, trimester = 1, type = "individual")
ephh<- get_microdata(year=2020, trimester = 1, type = "hogar")
eph1t<- left_join(ephi, ephh)
ephi<- get_microdata(year=2019, trimester = 4, type = "individual")
ephh<- get_microdata(year=2019, trimester = 4, type = "hogar")
eph4t2019<- left_join(ephi, ephh)
#Tercero 2019
ephi<- get_microdata(year=2019, trimester = 3, type = "individual")
ephh<- get_microdata(year=2019, trimester = 3, type = "hogar")
eph3t2019<- left_join(ephi, ephh)
ephtotal <- bind_rows(eph2t, eph1t, eph4t2019, eph3t2019)
#Quitar duplicados:
ephtotalsd <- ephtotal %>% distinct(., CODUSU, NRO_HOGAR, COMPONENTE, .keep_all = T)
#Generamos la PEA
ephtotalsd <- ephtotalsd %>%  mutate(PEA= case_when(ESTADO==3 ~ 0,
ESTADO==4 ~ 0,
ESTADO==1 ~ 1,
ESTADO==2 ~ 1),
horastrabtotales= PP3E_TOT + PP3F_TOT)
View(ephtotalsd)
#15-24 años
horastrab <- ephtotalsd %>% filter (AGLOMERADO==12 & ESTADO!=0)
#15-24 años
horastrab <- ephtotalsd %>% filter (AGLOMERADO==12 & ESTADO!=0)
#Hombres
hombres <- horastrab %>%  filter(CH04==1)
hombres <- horastrab %>% group_by(horastrabtotales) %>%  summarise(sum(PONDERA)/sum(hombres$PONDERA))
hombres
library(Hmisc)
ephcorr <- ephtotalsd %>% filter(AGLOMERADO==12 & ESTADO!=0)
ephcorr <- ephtotalsd %>%  mutate(cuantilp=as.numeric(cut(IPCF, wtd.quantile(IPCF, weights = PONDIH, probs = seq(0,1,length=6), na.rm = T), include.lowest = T)))
table(ephcorr$TRIMESTRE)
##Mercado laboral hasta el segundo trimestre 2020
setwd("~\GitHub\mercadolaboral")
##Mercado laboral hasta el segundo trimestre 2020
setwd("~/GitHub/mercadolaboral")
##Mercado laboral hasta el segundo trimestre 2020
setwd("~/GitHub/mercadolaboral")
wd
wd()
##Mercado laboral hasta el segundo trimestre 2020
setwd(~"/GitHub/mercadolaboral")
##Mercado laboral hasta el segundo trimestre 2020
setwd("/GitHub/mercadolaboral")
##Mercado laboral hasta el segundo trimestre 2020
setwd("~/GitHub/mercadolaboral")
##Mercado laboral hasta el segundo trimestre 2020
setwd("~/GitHub/guia")
##Mercado laboral hasta el segundo trimestre 2020
setwd("~/GitHub/mercadolaboral")
deflactor <- read.csv("deflactor.csv", header=T, sep=";", dec=".")
View(deflactor)
ephcorr <- left_join(ephcorr, deflactor)
View(ephcorr)
View(ephcorr)
ephcorr <- ephcorr %>%  mutate(IPCFR = IPCF/DEFLACTOR)
ephcorr <- ephtotalsd %>%  mutate(cuantilp=as.numeric(cut(IPCFR, wtd.quantile(IPCFR, weights = PONDIH, probs = seq(0,1,length=6), na.rm = T), include.lowest = T)))
ephcorr <- ephcorr %>%  mutate(cuantilp=as.numeric(cut(IPCFR, wtd.quantile(IPCFR, weights = PONDIH, probs = seq(0,1,length=6), na.rm = T), include.lowest = T)))
table(ephcorr$cuantilp)
#Quintil 1
quintil1 <- ephcorr %>% filter(cuantilp==1)
#Hombres
hombres <- quintil1 %>%  filter (ch04==1)
hombres <- quintil1 %>%  filter (CH04==1)
hombres <- hombres %>% group_by(cuantilp) %>% summarise(sum(PONDIH)/sum(hombres$PONDIH))
hombres
hombres <- quintil1 %>%  filter (CH04==1)
hombres <- hombres %>% group_by(PEA) %>% summarise(sum(PONDIH)/sum(hombres$PONDIH))
hombres
#Generamos la PEA
ephtotalsd <- ephtotalsd %>%  mutate(PEA= case_when(ESTADO==3 ~ 0,
ESTADO==4 ~ 0,
ESTADO==1 ~ 1,
ESTADO==2 ~ 1))
ephcorr <- ephtotalsd %>% filter(AGLOMERADO==12 & ESTADO!=0)
deflactor <- read.csv("deflactor.csv", header=T, sep=";", dec=".")
ephcorr <- left_join(ephcorr, deflactor)
ephcorr <- ephcorr %>%  mutate(IPCFR = IPCF/DEFLACTOR)
ephcorr <- ephcorr %>%  mutate(cuantilp=as.numeric(cut(IPCFR, wtd.quantile(IPCFR, weights = PONDIH, probs = seq(0,1,length=6), na.rm = T), include.lowest = T)))
table(ephcorr$cuantilp)
#Quintil 1
quintil1 <- ephcorr %>% filter(cuantilp==1)
hombres <- quintil1 %>%  filter (CH04==1)
hombres <- hombres %>% group_by(PEA) %>% summarise(sum(PONDIH)/sum(hombres$PONDIH))
hombres
#Mujeres
mujeres <- quintil1 %>%  filter (CH04==2)
mujeres <- mujeres %>% group_by(PEA) %>% summarise(sum(PONDIH)/sum(hombres$PONDIH))
#Mujeres
mujeres <- quintil1 %>%  filter (CH04==2)
mujeres <- mujeres %>% group_by(PEA) %>% summarise(sum(PONDIH)/sum(mujeres$PONDIH))
mujeres
table(ephcorr$cuantilp)
dim(ephcorr)
table(ephcorr$PEA)
2158+1413
table(ephcorr$PEA, ESTADO)
table(ephcorr$PEA, ephcorr$ESTADO)
1336+77+1624+534
ephcorr <- ephcorr %>%  mutate(cuantilp=as.numeric(cut(IPCFR, wtd.quantile(IPCFR, weights = PONDIH, probs = seq(0,1,length=6), na.rm = T), include.lowest = F)))
table(ephcorr$cuantilp)
